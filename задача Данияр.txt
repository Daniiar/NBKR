Нужно создать приложение, которое будет каждый день запрашивать данные о курсах валют с апи НБКР.
Запрошенные данные нужно записать в базу.
В приложении должна быть возможность выводить график изменений курса валют за неделю, за месяц, за год или за любой другой выбранный период.
При открытии главной страницы должны отображаться самые актуальные курсы валют и дата последнего обновления.
Должны присутствовать валидации такие как создание только одной записи курса для каждой валюты в день. Например курс валют доллара должен быть в единичном экземпляре для каждого дня.
Запрос данных с НБКР должен выполнятся автоматически, для этого нужно исользовать crontab, при деплое на Heroku нужно использовать встроенный Scheduler Heroku (https://devcenter.heroku.com/articles/scheduler).
Деплой на Heroku.
Код нужно писать так, чтобы можно было заменить любую часть приложения. Например если это будет приложение на Rails, то переход условно на Sinatra был возможен без особого труда.
По возможности лучше не использовать Rails, ActiveRecord, но не принципиально. Нужно обсудить.

Выполнение задачи:

1. Создать ER диаграмму базы данных. В первую очередь спланировать все необходимые таблицы. Если вопросы, сразу задавай мне.

2. Создать гем (рабочее название можно взять как nbkr_exchange_rates), который запрашивает данные с нбкр, парсит и выдает результат в Ruby Hash. Для парсинга XML использовать гем Ox, то есть в зависимостях должен быть Ox. Ожидаю вопросы при создании своего гема после ознакомления с документацией и примерами написания гемов. Гем публиковать не нужно, нужно подключить через ссылку на гитхабе.

3. Создать приложение, создать таблицы и определить связи. Написать тесты на rspec.

4. Подключить гем nbkr_exchange_rates. Создать инструмент, при вызове которого будет отправляться запрос в апи НБКР и полученные данные запишутся в базу. Запись должна происходить таким образом, что если на сегодня уже есть запись, то она должна обновляться. Но обновление должно происходить только если данные изменились. Если нет, то создаваться новая запись.

5. Создать интерфейс для вызова синхронизации через командную строку. Например rake task. И настроить crontab. В режиме разработки crontab должен вызывать синхронизацию каждый час. Для того чтобы видеть что crontab вызывается, при каждой синхронизации записывать лог. Для этого нужно создать дополнительный файл логов для синхронизации, например synchronization.log. Так же с вопросами ко мне.

6. Создать страницу отображения курса валют, с возможностью выбрать дату. По умолчанию должно показывать записи на сегодня.


Описание полей XML:
https://www.nbkr.kg/docs/xml_desc_ru.rtf

Ежедневные официальные курсы по USD, EUR, RUB, KZT
https://www.nbkr.kg/XML/daily.xml

Ссылка на документацию по API НБКР
https://www.nbkr.kg/index1.jsp?item=1562&lang=RUS
